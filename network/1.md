docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
docker-compose  -f docker-compose-cli.yaml  -f docker-compose-couch.yaml up -d


cryptogen:
 Version: 1.2.0
 Commit SHA: 5a6e86267
 Go version: go1.10.2
 OS/Arch: darwin/amd64

configtxgen:
 Version: 1.2.0
 Commit SHA: 5a6e86267
 Go version: go1.10.2
 OS/Arch: darwin/amd64

Organizations:
    Farmer
    Shipper
    Distributor
    Wholesaler
    Retailer

cryptogen generate --config=crypto-config.yaml

configtxgen -profile FiveOrgsOrdererGenesis -outputBlock ./channel-artifacts/genesis.block -channelID systemchain

configtxgen -profile FiveOrgsChannel -outputCreateChannelTx ./channel-artifacts/businesschain.tx -channelID businesschain

configtxgen -profile FiveOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/FarmerMSPanchors.tx -channelID businesschain -asOrg FarmerMSP
configtxgen -profile FiveOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/ShipperMSPanchors.tx -channelID businesschain -asOrg ShipperMSP
configtxgen -profile FiveOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/DistributorMSPanchors.tx -channelID businesschain -asOrg DistributorMSP
configtxgen -profile FiveOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/WholesalerMSPanchors.tx -channelID businesschain -asOrg WholesalerMSP
configtxgen -profile FiveOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/RetailerMSPanchors.tx -channelID businesschain -asOrg RetailerMSP






CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/sunmi.com/orderers/orderer.sunmi.com/tls/server.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/sunmi.com/orderers/orderer.sunmi.com/tls/server.key


ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/sunmi.com/orderers/orderer.sunmi.com/msp/tlscacerts/tlsca.sunmi.com-cert.pem
CORE_PEER_LOCALMSPID="OrdererMSP"
CORE_PEER_TLS_ROOTCERT_FILE=$ORDERER_CA
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/sunmi.com/orderers/orderer.sunmi.com/msp
peer channel fetch 0 0_block.pb -o orderer.sunmi.com:7050 -c "systemchain" --tls --cafile $ORDERER_CA


CORE_PEER_LOCALMSPID=FarmerMSP
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/farmer.com/peers/peer0.farmer.com/tls/server.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/farmer.com/peers/peer0.farmer.com/tls/server.key
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/farmer.com/peers/peer0.farmer.com/tls/ca.crt
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/farmer.com/users/Admin@farmer.com/msp
CORE_PEER_ADDRESS=peer0.farmer.com:7051

peer channel create -o orderer.sunmi.com:7050 -c businesschain -f ./channel-artifacts/businesschain.tx --tls --cafile $ORDERER_CA

peer channel fetch 0 businesschain0.block -o orderer.sunmi.com:7050 -c "businesschain" --tls --cafile $ORDERER_CA

peer channel join -b businesschain.block

peer channel update -o orderer.sunmi.com:7050 -c businesschain -f ./channel-artifacts/FarmerMSPanchors.tx --tls --cafile $ORDERER_CA

peer chaincode install -n pdcm -v 1 -p github.com/chaincode/marbles02_private/go

CORE_PEER_LOCALMSPID=DistributorMSP
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/distributor.com/peers/peer0.distributor.com/tls/server.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/distributor.com/peers/peer0.distributor.com/tls/server.key
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/distributor.com/peers/peer0.distributor.com/tls/ca.crt
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/distributor.com/users/Admin@distributor.com/msp
CORE_PEER_ADDRESS=peer0.distributor.com:7051
peer channel join -b businesschain.block
peer channel update -o orderer.sunmi.com:7050 -c businesschain -f ./channel-artifacts/DistributorMSPanchors.tx --tls --cafile $ORDERER_CA
peer chaincode install -n pdcm -v 1 -p github.com/chaincode/marbles02_private/go

CORE_PEER_LOCALMSPID=ShipperMSP
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/shipper.com/peers/peer0.shipper.com/tls/server.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/shipper.com/peers/peer0.Shipper.com/tls/server.key
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/shipper.com/peers/peer0.shipper.com/tls/ca.crt
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/shipper.com/users/Admin@shipper.com/msp
CORE_PEER_ADDRESS=peer0.shipper.com:7051
peer channel join -b businesschain.block
peer channel update -o orderer.sunmi.com:7050 -c businesschain -f ./channel-artifacts/ShipperMSPanchors.tx --tls --cafile $ORDERER_CA
peer chaincode install -n pdcm -v 1 -p github.com/chaincode/marbles02_private/go

CORE_PEER_LOCALMSPID=WholesalerMSP
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/wholesaler.com/peers/peer0.wholesaler.com/tls/server.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/wholesaler.com/peers/peer0.wholesaler.com/tls/server.key
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/wholesaler.com/peers/peer0.wholesaler.com/tls/ca.crt
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/wholesaler.com/users/Admin@wholesaler.com/msp
CORE_PEER_ADDRESS=peer0.wholesaler.com:7051
peer channel join -b businesschain.block
peer channel update -o orderer.sunmi.com:7050 -c businesschain -f ./channel-artifacts/WholesalerMSPanchors.tx --tls --cafile $ORDERER_CA
peer chaincode install -n pdcm -v 1 -p github.com/chaincode/marbles02_private/go

CORE_PEER_LOCALMSPID=RetailerMSP
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/retailer.com/peers/peer0.retailer.com/tls/server.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/retailer.com/peers/peer0.retailer.com/tls/server.key
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/retailer.com/peers/peer0.retailer.com/tls/ca.crt
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/retailer.com/users/Admin@retailer.com/msp
CORE_PEER_ADDRESS=peer0.retailer.com:7051
peer channel join -b businesschain.block
peer channel update -o orderer.sunmi.com:7050 -c businesschain -f ./channel-artifacts/RetailerMSPanchors.tx --tls --cafile $ORDERER_CA
peer chaincode install -n pdcm -v 1 -p github.com/chaincode/marbles02_private/go



peer chaincode instantiate -o orderer.sunmi.com:7050 -C businesschain -n pdcm -v 1 -c '{"Args":["init"]}' -P "AND('FarmerMSP.member', 'DistributorMSP.member')" --collections-config  /opt/gopath/src/github.com/chaincode/marbles02_private/collections_config.json --tls --cafile $ORDERER_CA

ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/sunmi.com/orderers/orderer.sunmi.com/msp/tlscacerts/tlsca.sunmi.com-cert.pem
FARMER_TLS_ROOT_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/farmer.com/peers/peer0.farmer.com/tls/ca.crt
DISTRIBUTOR_TLS_ROOT_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/distributor.com/peers/peer0.distributor.com/tls/ca.crt
peer chaincode invoke -o orderer.sunmi.com:7050 --tls --cafile $ORDERER_CA                      \
 -C businesschain -n pdcm -c '{"Args":["initMarble","marble6","black","523","tom","699"]}'          \
 --peerAddresses peer0.farmer.com:7051 --tlsRootCertFiles $FARMER_TLS_ROOT_CERT_FILE            \
 --peerAddresses peer0.distributor.com:7051 --tlsRootCertFiles $DISTRIBUTOR_TLS_ROOT_CERT_FILE

peer chaincode query -C businesschain -n pdcm -c '{"Args":["readMarble","marble4"]}'
peer chaincode query -C businesschain -n pdcm -c '{"Args":["getMarblesByRange","marble","marble4"]}'



